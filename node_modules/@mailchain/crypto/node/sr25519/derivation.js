'use strict';

var utilCrypto = require('@polkadot/util-crypto');
var hd = require('../hd.js');
var _private = require('./private.js');
var hd$1 = require('./hd.js');

async function sr25519DeriveHardenedKey(parentKey, index) {
    const ready = await utilCrypto.cryptoWaitReady(); // needed before calling sr25519DeriveHard
    if (!ready) {
        throw new Error('crypto libraries could not be initialized');
    }
    const chainCode = hd.chainCodeFromDeriveIndex(index);
    const childKeyPair = utilCrypto.sr25519DeriveHard(_private.asSR25519PrivateKey(parentKey.privateKey).keyPair, chainCode);
    return hd$1.SR25519ExtendedPrivateKey.fromPrivateKey(_private.SR25519PrivateKey.fromKeyPair(childKeyPair));
}

exports.sr25519DeriveHardenedKey = sr25519DeriveHardenedKey;
