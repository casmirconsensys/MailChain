import { SignerWithPublicKey } from '@mailchain/crypto';
import { MessagingKeyVerificationError } from '@mailchain/signatures';
import { Configuration, MailchainResult } from '@mailchain/internal';
import { MessagingKeys, ResolvedAddress, SomeAddressesUnresolvableError } from '@mailchain/internal/messagingKeys';
import { MailDistribution, MailData, Payload, MailSenderVerifier } from '@mailchain/internal/types/transport';
import { PreflightCheckError } from '@mailchain/internal/types/sending/errors';
export type PrepareMailParams = {
    message: MailData;
    senderMessagingKey: SignerWithPublicKey;
};
export type PreparedMail = {
    distributions: MailDistribution[];
    message: Payload;
    resolvedAddresses: Map<string, ResolvedAddress>;
};
export type PrepareMailError = PreflightCheckError | MessagingKeyVerificationError | SomeAddressesUnresolvableError;
export declare class MailPreparer {
    private readonly messagingKeys;
    private readonly mailSenderVerifier;
    constructor(messagingKeys: MessagingKeys, mailSenderVerifier: MailSenderVerifier);
    static create(configuration: Configuration): MailPreparer;
    prepareMail(params: PrepareMailParams): Promise<MailchainResult<PreparedMail, PrepareMailError>>;
}
